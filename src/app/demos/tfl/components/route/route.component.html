<dr-sub-header></dr-sub-header>
<section class="content">
  <section class="selector">
    <md-input-container>
      <input mdInput placeholder="Bus or Line Tube" [mdAutocomplete]="auto" [formControl]="term">
    </md-input-container>
    <md-autocomplete #auto="mdAutocomplete" [displayWith]="displayFn">
      <md-option *ngFor="let item of items" [value]="item" (onSelectionChange)="onChange(item)">
        {{ item.lineName }}
      </md-option>
    </md-autocomplete>    
  </section>
  <section class="display" >
    <md-card class="info" *ngIf="data">
      <md-card-header>
        <div class="buttons">
          <button md-raised-button [class.active]="!outbound" (click)="toggleOutbound()">Inbound</button>
          <button md-raised-button [class.active]="outbound" (click)="toggleOutbound()">Outbound</button>
        </div>
        <md-card-title>{{data.lineName}}</md-card-title>
        <md-card-subtitle>{{data.orderedLineRoutes[0]?.name}}</md-card-subtitle>
      </md-card-header>
      <md-card-content>
        <section class="map">
          <dr-gmaps [lat]="minLat" [lng]="minLon" [markers]="markers" [polygons]="polygons"></dr-gmaps>
        </section>
      </md-card-content>
    </md-card>
    <md-card class="stations">
      <md-card-content>
        <div class="example-header">
          <md-input-container floatPlaceholder="never">
            <input mdInput #filter placeholder="Filter stations">
          </md-input-container>
        </div>
        <md-table #table [dataSource]="dataSource" *ngIf="data">

          <ng-container cdkColumnDef="letter">
            <md-header-cell *cdkHeaderCellDef> Letter </md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.stopLetter}} </md-cell>
          </ng-container>

          <ng-container cdkColumnDef="name">
            <md-header-cell *cdkHeaderCellDef> Name </md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.name}} </md-cell>
          </ng-container>

          <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
          <md-row *cdkRowDef="let row; columns: displayedColumns;"></md-row>
        </md-table>
      </md-card-content>
    </md-card>
  </section>
</section>
